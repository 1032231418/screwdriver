#!/usr/bin/env node
'use strict';

const winston = require('winston');
const path = require('path');
const inMemoryDatastore = require('screwdriver-datastore-imdb');

require('../')({
    port: process.env.PORT || 8080,
    datastore: new inMemoryDatastore({
        filename: path.join(process.env.DATA_DIR || process.cwd(), '/database.json')
    })
}, (err, server) => {
    if (err) {
        winston.error(err);

        return process.exit(1);
    }

    return winston.info('Server running at %s', server.info.uri);
});
